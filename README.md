# 2025 Election Forecast using Non-representative Survey Data

# Introduction

Election forecasting is an important tool that can be used to predict the outcome of an electoral race ahead of the polling date. Information about which candidate is favoured to win an election is incredibly valuable to many stakeholders, including media outlets, campaign managers, and most cruicially, to voters themseleves. Creating polls that sample a representative segment of the target population is often the greatest logistical barrier to accurate and unbiased election forecasting, and requires considerable time and effort.

In this report, we hypothesize that an representative election forecast can be generated by using a census to post-stratify model results from a non-representative survey sample. We obtain voting preferences from a large-scale 2019 phone survey, which also collected detailed demographic information. We also use 2016 census data representative of the Canadian voter population in order to reweight model results in a representative manner.  

If elections can be accurately forecast by using non-representative datasets, poll predictions can be made more quickly, and with less resources required. This is important because election information is very time sensitive, so the ability to generate nuanced and timely election predictions is of high value, from both a practical and academic perspective.

# Data

## Data Cleaning
```
survey_data <- 
  survey_og_data %>% 
  mutate(vote_liberal = ifelse(q11==1, 1, 0),
         vote_conservative = ifelse(q11==2, 1, 0),
         vote_other = ifelse(q11==3|q11==4|q11==5|q11==6|q11==7, 1, 0),
         gender = case_when(
           q3==1 ~ "Male",
           q3==2 ~ "Female"),
         current_province = case_when(
           q4==1 ~ "Newfoundland and Labrador",
           q4==2 ~ "Prince Edward Island",
           q4==3 ~ "Nova Scotia",
           q4==4 ~ "New Brunswick",
           q4==5 ~ "Quebec",
           q4==6 ~ "Ontario",
           q4==7 ~ "Manitoba",
           q4==8 ~ "Saskatchewan",
           q4==9 ~ "Alberta",
           q4==10 ~ "British Columbia"),
         party_vote = case_when(
           q11==1 ~ "Liberal (Grits)",
           q11==2 ~ "Conservatives (Tory, PCs, Conservative Party of Canada)",
           q11==3 ~ "Other",
           q11==4 ~ "Other",
           q11==5 ~ "Other",
           q11==6 ~ "Other",
           q11==7 ~ "Other"),
         income_family = case_when(
           (q69 < 24999 & q69 > -1) ~ "Less than $25,000",
           (q69 < 49999 & q69 > 25000) ~ "$25,000 to $49,999",
           (q69 < 74999 & q69 > 50000) ~ "$50,000 to $74,999",
           (q69 < 99999 & q69 > 75000) ~ "$75,000 to $99,999",
           (q69 < 124999 & q69 > 100000) ~ "$100,000 to $ 124,999",
           (q69 > 125000) ~ "$125,000 and more"),
         age_category = case_when(
           (age > 17 & age < 30) ~ "18-29",
           (age > 29 & age < 45) ~ "30-44",
           (age > 44 & age < 65) ~ "45-64",
           (age > 64) ~ "65+"),
         education = case_when(
           (q61 == 1 | q61 == 2 | q61 == 3 | q61 == 4 | q61 == 5 | q61 == 6 | q61 == 7 | q61 == 8) ~ "No completed post-secondary education",
           (q61 == 9 | q61 == 10 | q61 == 11) ~ "Completed post-secondary education")
        ) %>% 
  select(gender, current_province, party_vote, income_family, age_category, 
         education, vote_liberal, vote_conservative, vote_other)
survey_data = na.omit(survey_data)

survey_data$income_family <- factor(survey_data$income_family,
                                    levels = c("Less than $25,000",
                                                             "$25,000 to $49,999",
                                                             "$50,000 to $74,999",
                                                             "$75,000 to $99,999",
                                                             "$100,000 to $ 124,999",
                                                             "$125,000 and more"))
survey_data$age_category <- factor(survey_data$age_category,
                                   levels = c("18-29",
                                              "30-44",
                                              "45-64",
                                              "65+"))
survey_data$education <- factor(survey_data$education,
                                levels = c("No completed post-secondary education",
                                           "Completed post-secondary education"))
```

### Survey Data

Analysis was performed on the publicly available [2019 Canadian Election Study (CES) data](https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/8RHLG1), which is collected annually and includes questions about past voting behaviour, as well as many demographic factors. The survey was administered over the phone during the campaign and post-election period, and sampled Canadian citizens and permanent residents over 18 years of age. Detailed sampling techniques can be found in the “2019 Canadian Election Study - Online Survey Technical Report and Codebook”. The original, uncleaned data contains 4,021 observations of 273 variables.

In the survey data's original state, each variable is named after its question code (q1, q2, p1, p2, etc). Thus, the cleaning process began with identifying important variables and modifying variable names for convenience and clarity. Each of the selected variables have been renamed to better describe the information being collected.
The table below displays the important variables from the survey data after the names have been changed.

Furthermore, the responses to each question in the survey data are coded as numbers, each representing a specific answer that can be found in the survey data documentation. This is not ideal for this report, so the responses for variables *gender*, *current_province* and *party_vote* are modified
in order to directly display the individual's response as its entire a string representation.

In addition, the income family variable is modified so that it is a categorical value
with 6 categories that correspond with the family income categories in the cleaned
census data. A new variable is also created in order to display and categorize the age 
of the respondent into one of four age groups. As well, the education variable is 
modified in order to only show whether the individual has achieved a Bachelor's 
degree or not. Following that, 3 binary variables are created based on *party_vote* to indicate an individual's likely votes for the Liberal, Conservative and 'Other' parties. Lastly, any observations with a N/A in any variable is removed. 

The newly cleaned data set contains 1923 observations and 9 variables. Below are the final cleaned variables from the survey data.

*age_category*: Age bracket of the individual. Categorical variable.\
*gender*: Gender of the individual. Categorical variable.\
*current_province*: "Current Canadian province the individual resides in. Categorical variable.\
*party_vote*: The political party that the individual claimed they would vote for. Categorical variable.\
*income_family*: The total household income bracket of the individual, before taxes. Categorical variable.\
*education*: Whether or not the individual has completed post-secondary education. Binary variable.\
*vote_liberal*: Whether or not the individual is likely to vote Liberal. Binary variable.\
*vote_conservative*: Whether or not the individual is likely to vote Conservative. Binary variable.\
*vote_other*: Whether or not the individual is likely to vote NDP, Bloc, Green or other parties. Binary variable.

One additional thing to note that is that while Gender is not limited to female and male in the survey, there is only 1 observation out of 1923 observations for "Other" in the *gender* variable. Thus, that observation was excluded as there is an insufficient sample size to draw any meaningful conclusions for those in the "Other" category.

### Census Data
[The data used as the census data comes from the 2017 General Social Survey (GSS)](https://sda-artsci-utoronto-ca.myaccess.library.utoronto.ca/legacy_sda/dli2/gss/gss31/gss31/more_doc/index.htm) that was conducted
between February to November 2017. The goal of the survey was to gather and view the changes
in the quality of life of Canadians as well as provide a general census on current
issues.
It targeted non-institutionalized people above the age of 15 that resided in a Canadian
province. The data collection process was done through telephone calls, in which telephone 
numbers were retrieved from the Address Register provided by Statistics Canada. 
The data itself contains 20,602 observations of 81 variables. 

```
census_og_data <- read.csv("C:/Users/justin/Downloads/gss_clean.csv")

census_data <- census_og_data %>%
  select(age, sex, province, income_family, education)
census_data = na.omit(census_data)
census_data <- subset(census_data, census_data$age > 17) 
census_data <- census_data %>% mutate(age = floor(age),
                                      age_category = case_when(
                                        (age > 17 & age < 30) ~ "18-29",
                                        (age > 29 & age < 45) ~ "30-44",
                                        (age > 44 & age < 65) ~ "45-64",
                                        (age > 64) ~ "65+"),
                                      education = case_when(
                                        (education == "High school diploma or a high school equivalency certificate" |
                                         education == "Trade certificate or diploma" |
                                         education == "Less than high school diploma or its equivalent" |
                                         education == "College, CEGEP or other non-university certificate or di..." |
                                         education == "University certificate or diploma below the bachelor's level") ~
                                          "No completed post-secondary education",
                                        (education == "Bachelor's degree (e.g. B.A., B.Sc., LL.B.)" | 
                                         education == "University certificate, diploma or degree above the bach...") ~
                                          "Completed post-secondary education"))

census_data <- census_data %>%
  select(age_category, sex, province, income_family, education)

census_data$income_family <- factor(census_data$income_family,
                                    levels = c("Less than $25,000",
                                                             "$25,000 to $49,999",
                                                             "$50,000 to $74,999",
                                                             "$75,000 to $99,999",
                                                             "$100,000 to $ 124,999",
                                                             "$125,000 and more"))
census_data$age_category <- factor(census_data$age_category,
                                   levels = c("18-29",
                                              "30-44",
                                              "45-64",
                                              "65+"))
census_data$education <- factor(census_data$education,
                                levels = c("No completed post-secondary education",
                                           "Completed post-secondary education"))
```

The cleaning process begins with selecting the variables that are relevant to our report.
Following, all observations with an N/A response in any of the variables are removed 
as well as observations where the individual is a minor (under the age of 18). The 
age variable is then rounded down in order to obtain a whole number. Subsequently, 
a new variable is created, which separates the observations into 4 age groups. 
Lastly, while the education variable provided by the census data offers in detail 
the highest certificate, diploma or degree achieved by the individual, that variable
is updated in order to only display whether the individual has achieved a Bachelor's degree.
The newly cleaned data set contains 19978 observations and 5 variables.
Below are the final variables that originate from the census data.

*age_category*: Age bracket of the individual. Categorical variable.\
*gender*: Gender of the individual. Categorical variable.\
*province*: "Current Canadian province the individual resides in. Categorical variable.\
*income_family*: The total household income bracket of the individual, before taxes. Categorical variable.\
*education*: Whether or not the individual has completed post-secondary education. Binary variable.

## Exploratory Data Analysis

  The survey data was relatively representative of the general Canadian population, estimated by the 2016 census information.  Figure 1 compares the age distribution of census and survey respondents, which are both approximately normally distributed and centered around 50 years of age. Figure 2 compares the relative proportion of respondents of each gender. There was a slightly higher proportion of female respondents in the census (54%) compared to a higher proportion of males in the survey (58%). Figure 3 shows the distribution of the provinces respondents resided in at the time of the survey. Notably, respondents from Ontario appear underrepresented in the survey (27% in the census and 21% in the survey), while respondents from British Columbia appear over represented (12% in the census and 19% in the survey). The income and education distributions of survey respondents appears to be right-skewed compared to the census data, with a higher proportion of survey respondents having a family income of greater than $125,000 and having completed a minimum of a Bachelor’s degree (Figure 4). Detailed information about respondent demographics of survey and census takers, as well as the comparative distributions of respondent education levels, can be found in the Appendix.  While survey data appears to be generally representative of the Canadian electorate, there are demographic differences that, if left uncorrected, could lead to election forecasting that would be biased and ungeneralizable to the Canadian population at large. [This is supported by political science research](https://www.thecanadianencyclopedia.ca/en/article/electoral-behaviour) that suggests that demographic variables such as gender, age, geography, education and income are influential determinants of political ideology.

Preliminary data analysis revealed trends to be considered when selecting variables to be included in the election model. Several demographic variables appeared to influence voting ideology. Specifically, a greater proportion of Conservative voters were males (70%), compared to Liberal voters (56%). Similarily,  Conservative voters far outweighed Liberal voters in Alberta, Manitoba and Saskatchewan. Conservatives voters comprised a greater proportion of voters in the 65+ years of age category, voters earning an annual family income of greater than $125,000, and voters who had not completed any post-secondary education. This exploratory data analysis indicates that demographic factors may be predictors of political ideology, and vote, and should be included when modeling voting behaviour. 

<p align="center">
  <img src="images/1.png" width="80%" height="80%">
</p>

<p align="center">
  <img src="images/2.png" width="80%" height="80%">
</p>

<p align="center">
  <img src="images/3.png" width="80%" height="80%">
</p>

## Methods

In this section, the survey data will be used to build three regression models, each with the goal of predicting whether or not a given voter will vote for a given Canadian political party. The estimates of these models will then be adjusted by post-stratification on census data in order to predict the overall popular vote of the 2025 Canadian federal election.

All analysis for this report was programmed using R version 4.0.2. using packages OpenIntro, tidyverse, Knitr, cesR & lme4.

### Model Specifics

Given that the objective of this analysis is to predict the overall outcome of the 2025 Canadian federal election, we choose to approximate this result by estimating the probabilities that a given voter votes for given parties. A voter can either choose to vote for a party, or to not vote for the party. Thus, there are two distinct scenarios for each party. A logistic regression is suited for this, as its dependent variable is binary. Knowing this, we create several logistic regression models for the various parties.

In addition, while we expect certain groupings of voters to vote differently, the effects of each group can vary, and are expected to be different between each group. We are not particularly interested in inferring how these different effects affect the outcome, rather we are interested in accounting for the influence of these effects in our models. Thus, we do so by incorporating random effects for each group in our models, resulting in two levels of parameters, and hence have a multilevel model.

We make the following assumptions in all of the models:\
  1. The response variable is binary (two possible responses).\
  2. The observations must be independent of one another.\
  3. The log of the odds ratio must be a linear function with respect to fixed effects.\
  4. Random effects follow a normal distribution with mean 0 and an estimated variance parameter.
  
We have already established that the response variable in each model has only two possible outcomes, verifying assumption 1. While there is little reason for observations to be correlated, it can be argued that family members can influence each others' political opinions. Acknowledging this potential caveat, this analysis will be carried out under assumption 2 being true. Regarding assumption 3, our models do not actually contain fixed effects, so this assumption holds. Assumption 4 holds true as there is little reason why any of the included random effects would significantly deviate from zero. We verify that this assumption is true in each regression model.

All three models were selected through backwards stepwise selection. Each model selection process began with a 'full model' containing all predictors under consideration. For each model, this included age category, gender, province, household income bracket, and education. These variables were initially selected because they could all be argued to have an influence a voter's vote. The next step was to remove the least significant predictor, determined by the highest p-value, then reevaluate the model. This step was repeated until all remaining predictors were statistically significant at the 0.05 level. The models that resulted from this process are described below.

*Model 1*: a multilevel logistic regression model, used to model the probability that a given voter will vote for the Liberal Party of Canada. The response variables that are used are the voter's province of residence and level of education, both of which are recorded as categorical variables. The model is as follows:

$$Y^{Lib}_i=log\left(\frac{p_i}{1-p_i}\right) = \beta_0 + \phi_g + \epsilon_h$$

$Y^{Lib}_i$ is an indicator variable recording if the $i^{th}$ voter voted for the Liberal Party (1) or another party (0), and is represented by the log-odds of $p^{Lib}_i$, where $p^{Lib}_i$ is the true probability that the $i^{th}$ voter voted for the Liberal Party.
$\beta_0$ is the intercept, representing the mean log-odds of voting for the Liberal Party across all voters.
$\phi_g$ and $\epsilon_h$ are random effects, each representing the deviation in the log-odds intercept for province $g$ and education level $h$, after controlling for all other covariates in the model.

*Model 2*: a multilevel logistic regression model, used to model the probability that a given voter will vote for the Conservative Party of Canada. The response variables that are used are the voter's gender, province of residence, household income bracket, and level of education, all of which are recorded as categorical variables. The model is as follows:

$$Y^{Cons}_i=log\left(\frac{p^{Cons}_i}{1-p^{Cons}_i}\right) = \beta_0 + \gamma_g + \phi_h + \delta_j + \epsilon_k$$

$Y^{Cons}_i$ is an indicator variable recording if the $i^{th}$ voter voted for the Conservative Party (1) or another party (0), and is represented by the log-odds of $p^{Cons}_i$, where $p^{Cons}_i$ is the true probability that the $i^{th}$ voter voted for the Conservative Party.
$\beta_0$ is the intercept, representing the mean log-odds of voting for the Conservative Party across all voters.
$\gamma_g$, $\phi_h$, $\delta_j$ and $\epsilon_h$ are all random effects, each representing the deviation in the log-odds intercept for gender $g$, province $h$, income bracket $j$, and education level $k$, after controlling for all other covariates in the model.

*Model 3*: a multilevel logistic regression model, used to model the probability that a given voter will vote for a party other than the Liberal Party of Canada or the Conservative Party of Canada. The response variables that are used are the voter's age category, province of residence, and household income bracket, all of which are recorded as categorical variables. The model is as follows:

$$Y^{other}_i=log\left(\frac{p^{other}_i}{1-p^{other}_i}\right) = \beta_0 + \alpha_g + \phi_h + \delta_j$$

$Y^{other}_i$ is an indicator variable recording if the $i^{th}$ voter voted for a non-Liberal & non-Conservative party (1) or voted for either the Liberal Party/Conservative Party (0), and is represented by the log-odds of $p^{other}_i$, where $p^{other}_i$ is the true probability that the $i^{th}$ voter voted for a party other than the Liberal Party or Conservative Party.
$\beta_0$ is the intercept, representing the mean log-odds of voting for a non-Liberal & non-Conservative party across all voters.
$\alpha_g$, $\phi_h$, and $\delta_j$ are all random effects, each representing the deviation in the log-odds intercept for age_category $g$, province $h$, and income bracket $j$, after controlling for all other covariates in the model.
